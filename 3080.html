<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EYES OF 3080</title>

<!-- Site Description for SEO -->
  <meta name="description" content="EYES OF 3080, We keep students connected, share real updates, and inspire one another to grow in UNIOSUN.">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/EYES%20OF%203080%20logo.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="EYES OF 3080">
  <meta property="og:description" content="We keep students connected, share real updates, and inspire one another to grow in UNIOSUN.">
  <meta property="og:image" content="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/EYES%20OF%203080%20logo.png">
  <meta property="og:url" content="https://yourwebsite.com">
  <meta property="og:type" content="website">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="EYES OF 3080">
  <meta name="twitter:description" content="We keep students connected, share real updates, and inspire one another to grow in UNIOSUN.">
  <meta name="twitter:image" content="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/EYES%20OF%203080%20logo.png">

<style>
  :root {
    --uni-green:#0a5a2b;
    --uni-green-2:#155e36;
    --text:#0e0e0e;
    --muted:#5f6b5f;
    --surface:#ffffff;
    --dark-bg:#121212;
    --dark-surface:#1e1e1e;
    --dark-text:#e0e0e0;
  }
  body { margin:0; font-family:Arial, sans-serif; background:#fff; color:var(--text); }

  /* DARK MODE */
  body.dark { background:var(--dark-bg); color:var(--dark-text); }
  body.dark .card { background:var(--dark-surface); border-color:#333; }
  body.dark nav { background:#222; }
  body.dark nav a { color:#ddd; }
  body.dark nav a:hover { color:#4caf50; }
  body.dark .topbar { background:#222; }
  body.dark footer { background:#111; }

  /* HEADER */
  .topbar { background:var(--uni-green); color:#fff; padding:16px; display:flex; justify-content:space-between; align-items:center; }
  .brand { display:flex; align-items:center; gap:12px; }
  .brand img { width:50px; height:50px; border-radius:50%; background:#fff; }
  .brand h1 { margin:0; font-size:22px; }

  .actions { display:flex; gap:10px; align-items:center; }
  .hamburger { display:flex; flex-direction:column; gap:4px; cursor:pointer; }
  .hamburger span { width:24px; height:3px; background:#fff; border-radius:2px; }
  .mode-toggle { background:#fff; color:var(--uni-green); border:none; border-radius:6px; padding:6px 10px; cursor:pointer; }

  /* NAVIGATION */
  nav { background:#eee; }
  nav ul { list-style:none; display:flex; gap:14px; padding:10px; margin:0; }
  nav a { color:#000; text-decoration:none; font-weight:500; cursor:pointer; }
  nav a:hover { color:var(--uni-green); }

  @media(max-width:700px){
    nav ul { flex-direction:column; display:none; }
    nav ul.active { display:flex; }
  }

  /* SEARCH */
  .search { max-width:400px; margin:16px auto; }
  .search input { width:100%; padding:10px 14px; border-radius:8px; border:1px solid #ccc; }

  /* GRID */
  .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:16px; margin:20px 0; padding:0 16px; }
  .card { background:var(--surface); border:1px solid #eee; padding:16px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
  .card h3 { margin:0 0 10px; font-size:18px; }
  .card p { color:var(--muted); margin-bottom:12px; }
  .btn { background:var(--uni-green-2); color:#fff; border:none; padding:8px 14px; border-radius:6px; cursor:pointer; }

  /* SINGLE POST */
  #postDetail { display:none; max-width:800px; margin:20px auto; padding:16px; }
  #postDetail h1 { font-size:26px; }
  #postDetail img { width:100%; border-radius:8px; margin:16px 0; }
  .back-btn { cursor:pointer; color:var(--uni-green); margin-bottom:15px; display:inline-block; }

  /* SHARE ICONS */
  .share-section { margin-top:20px; display:flex; align-items:center; gap:12px; }
  .share-section span { font-weight:bold; }
  .share-icons a { text-decoration:none; font-size:22px; }
  .share-icons a:hover { opacity:0.7; }

.card-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.card-header h3 {
  margin:0;
  font-size:18px;
  flex:1;
}
.share-icon img {
  width:20px;
  height:20px;
  cursor:pointer;
}
.share-icon img:hover { opacity:0.7; }

html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden; /* hides horizontal scroll */
}

* {
  box-sizing: border-box; /* prevents padding/margin from pushing things out */
}

/* ======= SLIDER ======= */
  .slider{position:relative;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);}
  .slides{display:flex;transition:transform 0.5s ease-in-out;}
  .slide{min-width:100%;position:relative;}
  .slide img{width:100%;height:280px;object-fit:cover;}
  .overlay{position:absolute;bottom:18px;left:18px;right:18px;color:#fff;font-weight:800;font-size:30px;
    line-height:1.2;text-shadow:0 3px 10px rgba(0,0,0,.35);}
  .arrow{
    position:absolute;top:50%;transform:translateY(-50%);
    background:rgba(0,0,0,0.5);color:#fff;border:none;
    font-size:24px;padding:10px;border-radius:50%;cursor:pointer;
  }
  .arrow.left{left:10px;}
  .arrow.right{right:10px;}


  /* COUNTER SECTION */
  .stats-section { background:var(--uni-green); color:#fff; padding:50px 20px; text-align:center; }
  .stats-container { display:flex; flex-wrap:wrap; justify-content:center; max-width:1000px; margin:auto; gap:30px; }
  .stat-box { flex:1; min-width:200px; }
  .stat-box h2 { font-size:2.5rem; margin:0; font-weight:bold; }
  .stat-box p { margin:10px 0 0; font-size:1.1rem; }


  /* FOOTER */
  footer { background:var(--uni-green); color:#fff; padding:30px 16px; text-align:center; }

  /* HIDE SECTIONS */
  .page-section { display:none; }
</style>

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- HEADER -->
<div class="topbar">
  <div class="brand">
    <img src="https://i.postimg.cc/mD4BWXCk/6a8f3e57-3d27-47f5-9b5e-22a7070fc442.jpg" alt="Logo">
    <h1>EYES OF 3080</h1>
  </div>
  <div class="actions">
    <div class="hamburger" onclick="toggleMenu()"><span></span><span></span><span></span></div>
    <button class="mode-toggle" onclick="toggleDarkMode()">üåô</button>
  </div>
</div>



<!-- NAVIGATION MENU -->
<nav>
  <ul class="menu" id="menu">
    <li><a onclick="showSection('home')">Home</a></li>
    <li><a onclick="showSection('campus-gist')">Campus Gist</a></li>
    <li><a onclick="showSection('academic-updates')">Academic Updates</a></li>
    <li><a onclick="showSection('gaming')">Gaming</a></li>
    <li><a onclick="showSection('pdfs')">PDFs</a></li>
    <li><a onclick="showSection('anonymous')">Anonymous</a></li>
<li><a onclick="showSection('uniosun-login-help')">UNIOSUN LOGIN HELP</a></li>
  <li><a onclick="showSection('marketplace')">MarketplaceüõçÔ∏è</a></li>
  </ul>
</nav>


      

<!-- MAIN SECTIONS -->
<main>
  <!-- HOME -->
  <section id="home" class="page-section">
    <div class="search">
      <input type="search" id="searchInput" placeholder="Search news..." onkeyup="searchNews()" />
    </div>


  <section id="newsGrid" class="grid">
    <article class="card">
      <div class="card-header">
        <h3>üì¢ 2025/2026 UNIOSUN JUPEB Entrance Examination</h3>
        <a href="#" class="share-icon" onclick="sharePost('copy')">
          <img src="https://cdn-icons-png.flaticon.com/512/3466/3466003.png" alt="Share" />
        </a>
      </div>
      <p>This is to invite you for the JUPEB entrance examination‚Ä¶</p>
      <button class="btn" onclick="openPost(1)">Read More</button>
    </article>

    <article class="card">
      <div class="card-header">
        <h3>SCREENING RESULT NOTICE</h3>
        <a href="#" class="share-icon" onclick="sharePost('copy')">
          <img src="https://cdn-icons-png.flaticon.com/512/3466/3466003.png" alt="Share" />
        </a>
      </div>
      <p>Be informed that immediately the admission form closes, you will see your screening result‚Ä¶</p>
      <button class="btn" onclick="openPost(2)">Read More</button>
    </article>
  </section>
</section>





  <!-- CAMPUS GIST -->
  <section id="campus-gist" class="page-section">
    <h2 style="padding:16px;">üè´ Campus Gist</h2>
    <section class="grid">
      <article class="card">
        <h3>Tips for Freshers</h3>
        <p>Don‚Äôt forget your power bank and SIM card‚Ä¶</p>
        <button class="btn" onclick="openPost(3)">Read More</button>
      </article>
    </section>
  </section>

  <!-- ACADEMIC UPDATES -->
  <section id="academic-updates" class="page-section">
    <h2 style="padding:16px;">üìö Academic Updates</h2>
    <section class="grid">
      <article class="card">
        <h3>2025/2026 POST UTME Screening</h3>
        <p>Notice for UTME candidates‚Ä¶</p>
        <button class="btn" onclick="openPost(4)">Read More</button>
      </article>
    </section>
  </section>

<!-- üéÆ GAMING ZONE -->
<section id="gaming" class="page-section" style="display:none;">
  <h2 class="section">üéÆ Gaming Zone</h2>

  <style>
    /* ===== Gaming Zone Styles ===== */
    #gaming {
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
    }

    #gaming h2.section {
      color: var(--uni-green);
      text-align: center;
      margin-bottom: 25px;
    }

    #gaming .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    #gaming .card {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: transform 0.2s ease;
    }

    #gaming .card:hover {
      transform: translateY(-3px);
    }

    #gaming .card h3 {
      margin: 10px 0;
      color: var(--uni-green);
    }

    #gaming form input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    #gaming form button {
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      background: var(--uni-green);
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }

    #gaming form button:hover {
      background: var(--uni-green-2);
    }

    /* Username button style (Option 2) */
    #gaming ul {
      margin-top: 12px;
      padding-left: 0;
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    #gaming ul li {
      display: inline-block;
    }

    #gaming ul li span {
      background: var(--uni-green);
      color: #fff;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s ease;
      display: inline-block;
    }

    #gaming ul li span:hover {
      background: var(--uni-green-2);
    }

    /* Responsive tweaks */
    @media (max-width: 600px) {
      #gaming .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <section class="grid">
    
    <!-- eFootball -->
    <article class="card" style="text-align:center;">
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/E-football%20logo" 
           alt="eFootball Logo" style="max-width:120px; margin-bottom:10px;">
      <h3>eFootball</h3>
      <p>Share your Konami ID / Username to connect with fellow players.</p>
      <form onsubmit="addGamertag(event, 'efootball')" style="display:flex;gap:10px;flex-wrap:wrap;">
        <input type="text" id="efootballInput" placeholder="Enter your username" required />
        <button type="submit">Share</button>
      </form>
      <ul id="efootballList"></ul>
    </article>

    <!-- Free Fire -->
    <article class="card" style="text-align:center;">
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/Free%20fire%20logo" 
           alt="Free Fire Logo" style="max-width:120px; margin-bottom:10px;">
      <h3>Free Fire</h3>
      <p>Drop your Free Fire ID or nickname.</p>
      <form onsubmit="addGamertag(event, 'freefire')" style="display:flex;gap:10px;flex-wrap:wrap;">
        <input type="text" id="freefireInput" placeholder="Enter your Free Fire ID" required />
        <button type="submit">Share</button>
      </form>
      <ul id="freefireList"></ul>
    </article>

    <!-- CODM -->
    <article class="card" style="text-align:center;">
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/cod%20logo" 
           alt="COD Mobile Logo" style="max-width:120px; margin-bottom:10px;">
      <h3>Call of Duty Mobile</h3>
      <p>Share your Call of Duty Mobile username to team up.</p>
      <form onsubmit="addGamertag(event, 'codm')" style="display:flex;gap:10px;flex-wrap:wrap;">
        <input type="text" id="codmInput" placeholder="Enter your CODM username" required />
        <button type="submit">Share</button>
      </form>
      <ul id="codmList"></ul>
    </article>

<!-- DLS -->
    <article class="card" style="text-align:center;">
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/DLS%20LOGO" 
           alt="Dream League Soccer Logo" style="max-width:120px; margin-bottom:10px;">
      <h3>Dream League Soccer</h3>
      <p>Share your DLS username to connect with friends.</p>
      <form onsubmit="addGamertag(event, 'dls')" style="display:flex;gap:10px;flex-wrap:wrap;">
        <input type="text" id="dlsInput" placeholder="Enter your DLS username" required />
        <button type="submit">Share</button>
      </form>
      <ul id="dlsList"></ul>
    </article>
    
    
  <!-- BLOOD STRIKE -->
<article class="card" style="text-align:center;">
  <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/Blood%20strike%20.jpeg" 
       alt="blood strike Logo" style="max-width:120px; margin-bottom:10px;">
  <h3>BLOOD STRIKE</h3>
  <p>Share your Blood Strike username to connect with friends.</p>
  <form onsubmit="addGamertag(event, 'blood strike')" style="display:flex;gap:10px;flex-wrap:wrap;">
    <input type="text" id="bloodstrikeInput" placeholder="Enter your Blood Strike username" required />
    <button type="submit">Share</button>
  </form>
  <ul id="bloodstrikeList"></ul>
</article>


  </section>
</section>


<!-- ANONYMOUS MESSAGES SECTION -->
<section id="anonymous" class="page-section" style="display:none;">

  <h2>üí¨ Anonymous Messages</h2>

  <!-- FORM -->
  <form onsubmit="submitAnonymousMessage(event)" class="anon-form">
    <textarea id="anonText" placeholder="Type your anonymous message..." required></textarea>
    <input type="file" id="anonFile" accept="image/*,.pdf,.doc,.docx" />

    <!-- PREVIEW AREA -->
    <div id="anonPreview" class="anon-preview"></div>

    <button type="button" onclick="previewAnonymousMessage()">üëÄ Preview</button>
    <button type="submit">üöÄ Post Message</button>
  </form>

  <!-- MESSAGES FEED -->
  <h3>üì∞ Recent Messages</h3>
  <div id="anonMessages" class="anon-messages"></div>
  <button id="loadMoreBtn" onclick="loadMoreAnonymousMessages()" style="display:none;">‚¨áÔ∏è Load More</button>
</section>


<!-- ============================
   ANONYMOUS MESSAGES STYLING
============================ -->
<style>
#anonymous {
  padding: 20px;
  background: #f9fdf9; /* light background */
  min-height: 100vh;
}

/* Section title */
#anonymous h2, 
#anonymous h3 {
  color: #0a5a2b; /* Uni green */
  text-align: center;
  margin-bottom: 15px;
  font-weight: bold;
}

/* Form container */
#anonymous form {
  background: #ffffff;
  padding: 16px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}

/* Textarea */
#anonymous textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #cfd8cf;
  border-radius: 8px;
  resize: none;
  min-height: 80px;
  font-size: 15px;
  outline: none;
}

/* File input */
#anonymous input[type="file"] {
  margin-top: 10px;
  display: block;
  font-size: 14px;
}

/* Buttons */
#anonymous button {
  background: #0a5a2b;
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 6px;
  margin-top: 12px;
  cursor: pointer;
  font-size: 15px;
  transition: background 0.3s ease;
}

#anonymous button:hover {
  background: #155e36;
}

#anonymous button[type="button"] {
  background: #ffffff;
  color: #0a5a2b;
  border: 1px solid #0a5a2b;
  margin-right: 8px;
}

#anonymous button[type="button"]:hover {
  background: #e9f7ee;
}

/* Messages list */
#anonMessages {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* Each message card */
.anon-card {
  background: #fff;
  padding: 14px;
  border-radius: 10px;
  border-left: 4px solid #0a5a2b;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
  font-size: 15px;
  line-height: 1.5;
  word-wrap: break-word;
}

.anon-card p {
  margin: 0;
  color: #111;
}

/* Image inside messages */
.anon-card img {
  margin-top: 10px;
  border-radius: 6px;
  max-width: 100%;
  height: auto;
}

/* File link */
.anon-card a {
  display: inline-block;
  margin-top: 10px;
  color: #0a5a2b;
  text-decoration: none;
  font-weight: bold;
}

.anon-card a:hover {
  text-decoration: underline;
}

/* Responsive */
@media (max-width: 600px) {
  #anonymous h2 {
    font-size: 1.4rem;
  }
  #anonymous textarea {
    min-height: 70px;
  }
}
</style>

<!-- UNIOSUN LOGIN HELP -->
<section id="uniosun-login-help" class="page-section" style="display:none;">
  <h2 class="section">UNIOSUN Login Help</h2>

  <!-- Copy Portal Link -->
  <button onclick="copyPortalLink()" style="
    background:#0a5a2b; color:white; border:none; border-radius:4px;
    padding:8px 12px; cursor:pointer; margin-bottom:15px;
  ">Copy UNIOSUN Portal Link</button>

  <section class="grid">

    <!-- Step 1: Open Portal -->
    <article class="card">
      <h3>Step 1: Open UNIOSUN Portal</h3>
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/1.jpeg" 
           alt="UNIOSUN Portal Homepage" 
           style="width:100%; border-radius:8px; margin-top:10px;" />
      <p>Go to the official UNIOSUN portal to start the login or password retrieval process,click on returning applicants</p>
      <div class="hr"></div>
    </article>

    <!-- Step 2: Click Forgot Password -->
    <article class="card">
      <h3>Step 2: Click 'Login or Forgot Password'</h3>
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/2.jpeg" 
           alt="LOGIN" 
           style="width:100%; border-radius:8px; margin-top:10px;" />
      <p>On the login page, input your details or <b>'forgot password'</b>if you dont remember it</p>
      <div class="hr"></div>
    </article>

    <!-- Step 3: Enter Email or Matric Number -->
    <article class="card">
      <h3>Step 3: Enter JAMB REG and Email</h3>
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/3.jpeg" 
           alt="Email Entry Screen" 
           style="width:100%; border-radius:8px; margin-top:10px;" />
      <p>Provide your registered email and jamb registration number to receive the password reset link.</p>
      <div class="hr"></div>
    </article>

    <!-- Step 4: Check Email & Reset Password -->
    <article class="card">
      <h3>Step 4: Check Email & Reset Password</h3>
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/4.jpeg" 
           alt="Password Reset Email" 
           style="width:100%; border-radius:8px; margin-top:10px;" />
      <p>Check your inbox (and spam folder) for the password reset link sent by UNIOSUN. Follow the link to set a new password.</p>
      <div class="hr"></div>
    </article>

    <!-- Step 5: Log In With New Password -->
    <article class="card">
      <h3>Step 5: Log In</h3>
      <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/2.jpeg"" 
           alt="Login Successful" 
           style="width:100%; border-radius:8px; margin-top:10px;" />
      <p>Return to the portal login page and log in with your new password to access your account.</p>
      <div class="hr"></div>
    </article>

  </section>
</section>

<!-- üìë PDF RESOURCES SECTION -->
<section id="pdfs" class="page-section" style="display:none; padding:20px;">
  <h2 class="section">üìë PDF Resources</h2>
  <p>Download past questions, guides, and handouts.</p>

  <!-- Level Selection -->
  <label for="levelSelect"><b>Choose your level:</b></label>
  <select id="levelSelect" class="styled-select" onchange="showLevelPDFs()">
    <option value="">-- Select Level --</option>
    <option value="100">100 Level</option>
    <option value="200">200 Level</option>
    <option value="300">300 Level</option>
    <option value="400">400 Level</option>
  </select>

  <!-- 100 LEVEL -->
  <div id="pdfGrid100" class="pdf-grid" style="display:none; margin-top:20px;">
    <h3>üìò 100 Level Resources</h3>

    <div class="pdf-card">
      <h4>BIO 102 - Jimoh</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/100%20level%202025_BIO%20102_JIMOH.pptx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>ACC 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/ACC%20101.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>MCB 104</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/UNIOSUN-MCB%20104%20Lecture%20note%201.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>MCB 102 [Microbial Measurement]</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/MCB%20102_2024-2025_Microbial%20Measurement.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>COMPLETE MCB 102</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/COMPLETE%20UNIOSUN-MCB%20102%20PRESENTATION%20SLIDE%2024_25.pptx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>ECO 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/ECO%20101%20LECTURE%20NOTE.docx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>COS 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/COS101.pptx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>ECO 103</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/ECO%20103%20FRACTIONS-1%202.pptx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>POL 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/POL%20101.docx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>EXCRETION 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Excretion_BIO101_lesson%202%20-%20Copy.docx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>GNS 102</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/GNS%20102_100632.pptx" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>Growth & Development (BIO 102)</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/GROWTH%20AND%20DEVELOPMENT.doc" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>IRD 101</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Ird%20100l%20first%20pass%20questions.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>Cell & Cytosis (BIO 101)</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/The%20Cell%20Cycle,Mitosis%20and%20Meiosis.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>Hormones (BIO 102)</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Hormonal%20Regulations%20of%20the%20kidneys%20.docx" target="_blank" download>üìÑ Download</a>
    </div>

    <!-- Keep adding more PDF cards here -->
  </div>

  <!-- 200 LEVEL -->
  <div id="pdfGrid200" class="pdf-grid" style="display:none; margin-top:20px;">
    <h3>üìó 200 Level Resources</h3>

    <div class="pdf-card">
      <h4>FMS 203</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Fms203.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>FRENCH 201</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/FRENCH201.pdf" target="_blank" download>üìÑ Download</a>
    </div>
  </div>

  <!-- 300 LEVEL -->
  <div id="pdfGrid300" class="pdf-grid" style="display:none; margin-top:20px;">
    <h3>üìï 300 Level Resources</h3>

    <div class="pdf-card">
      <h4>BUS 318</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Bus%20318.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>BUS 317</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Bus317.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>BUS 307</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Bus307.pdf" target="_blank" download>üìÑ Download</a>
    </div>

    <div class="pdf-card">
      <h4>FIN MANAGEMENT</h4>
      <a class="pdf-btn" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/pdf-resources/Fin%20management.pdf" target="_blank" download>üìÑ Download</a>
    </div>
  </div>

  <!-- 400 LEVEL -->
  <div id="pdfGrid400" class="pdf-grid" style="display:none; margin-top:20px;">
    <h3>üìô 400 Level Resources</h3>
    <p>No resources uploaded yet.</p>
  </div>
</section>

<!-- CSS -->
<style>
/* Responsive grid */
.pdf-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 18px;
  margin-top: 20px;
}
.pdf-card {
  background: var(--surface);
  border-radius: 10px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.pdf-card h4 {
  font-size: 15px;
  margin-bottom: 12px;
  color: var(--uni-green);
  word-break: break-word;
}

/* Styled Dropdown */
.styled-select {
  padding: 10px 14px;
  border: 2px solid var(--uni-green);
  border-radius: 8px;
  font-size: 15px;
  font-weight: bold;
  background: #f9fff9;
  color: var(--uni-green);
  outline: none;
  cursor: pointer;
  margin-top: 10px;
  transition: 0.3s;
  width: 100%;
  max-width: 300px;
}
.styled-select:hover {
  background: #e6f7e6;
}

/* Buttons */
.pdf-btn {
  display: inline-block;
  margin-top: 12px;
  padding: 10px 20px;
  background: linear-gradient(135deg, var(--uni-green), var(--uni-green-2));
  color: #fff;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  text-decoration: none;
  transition: transform 0.2s, box-shadow 0.2s;
}
.pdf-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
</style>



  <!-- Marketplace -->
<section id="marketplace" class="page-section">
  <h2 class="section">üõçÔ∏è UNIOSUN MARKETPLACE</h2>
  <p>
    Shop campus essentials, merch & e-books right here on <b>Eyes of 3080</b>.
  </p>
  <p>
    Want to sell your products on our marketplace?  
  </p>
  <a href="https://wa.me/2347063123719?text=Hello%2C%20I%20want%20to%20register%20my%20goods%20on%20UNIOSUN%20Marketplace" 
     target="_blank" 
     style="display:inline-block; background:#0a5a2b; color:#fff; padding:12px 24px; border-radius:30px; font-weight:600; text-decoration:none; transition:background 0.3s ease;">
    üì© Register
  </a>
</section>

  <!-- PRODUCT GRID (dynamic from Supabase) -->
  <div class="product-grid">
    <!-- Products will load here automatically -->
  </div>
</section>

<!-- üõí CART DRAWER -->
<div id="cart-drawer">
  <h3>Your Cart</h3>
  <div id="cart-items"></div>
  <p class="total">Total: ‚Ç¶<span id="cart-total">0</span></p>
  <button class="checkout" onclick="checkoutWhatsApp()">‚úÖ Checkout via WhatsApp</button>
  <button class="close-cart" onclick="toggleCart()">‚úñ Close</button>
</div>

<!-- üõí CART ICON -->
<div id="cart-icon" class="cart-icon" onclick="toggleCart()">
  üõí <span id="cart-count">0</span>
</div>

<style>
/* ===================== MARKETPLACE LAYOUT ===================== */
#marketplace {
  margin-top: 40px;
  padding: 20px;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 20px;
}

.product-card {
  background: #fff;
  border-radius: 12px;
  padding: 15px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.2s, box-shadow 0.2s;
}

.product-card:hover { 
  transform: translateY(-6px); 
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

.product-card img {
  max-width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}

.product-card h3 { 
  margin: 8px 0; 
  font-size: 18px; 
}

.price { 
  font-weight: bold; 
  color: #0a5a2b; 
  font-size: 16px; 
}

.desc { 
  font-size: 13px; 
  color: #666; 
}

.product-card button {
  margin-top: 10px;
  background: #0a5a2b;
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s;
}

.product-card button:hover { 
  background: #155e36; 
}

/* ===================== CART DRAWER ===================== */
#cart-drawer {
  position: fixed;
  top: 0; 
  right: -350px;
  width: 320px;
  height: 100%;
  background: #fff;
  box-shadow: -3px 0 10px rgba(0,0,0,0.3);
  padding: 20px;
  transition: right 0.3s ease;
  z-index: 1000;
  display: flex;
  flex-direction: column;
}

#cart-drawer.open { 
  right: 0; 
}

#cart-items { 
  flex: 1; 
  overflow-y: auto; 
  margin: 10px 0; 
}

.cart-item { 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  margin-bottom: 12px; 
}

.cart-item img { 
  width: 45px; 
  height: 45px; 
  margin-right: 10px; 
  border-radius: 5px; 
}

.cart-item span { 
  flex: 1; 
  font-size: 14px; 
}

.cart-item .qty { 
  display: flex; 
  align-items: center; 
}

.cart-item button { 
  background: #ddd; 
  border: none; 
  padding: 4px 8px; 
  margin: 0 3px; 
  cursor: pointer; 
  border-radius: 4px; 
}

.cart-item button:hover { 
  background: #bbb; 
}

.total { 
  font-weight: bold; 
  margin-top: 10px; 
  font-size: 16px; 
}

.checkout, .close-cart {
  margin-top: 12px;
  padding: 12px;
  border: none;
  background: #0a5a2b;
  color: #fff;
  border-radius: 6px;
  cursor: pointer;
  font-size: 15px;
}

.checkout:hover { 
  background: #155e36; 
}

.close-cart { 
  background: #888; 
}

.close-cart:hover { 
  background: #555; 
}

/* ===================== FLOATING CART ICON ===================== */
.cart-icon {
  position: fixed;
  top: 15px; 
  right: 20px;
  background: #0a5a2b;
  color: #fff;
  padding: 8px 12px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 16px;
  z-index: 1100;
  display: none; /* hidden by default */
}

.cart-icon span {
  background: red;
  color: #fff;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 50%;
  margin-left: 5px;
}
</style>

  <!-- SINGLE POST -->
<section id="postDetail" class="page-section" style="display:none;">
  <div class="back-btn" onclick="goBack()">‚Üê</div>
  <h1 id="detailTitle"></h1>
  <p id="detailMeta"></p>
  <img id="detailImage" style="display:none; max-width:100%; border-radius:8px; margin:10px 0;" />
  <div id="detailContent"></div>

  <div class="share-section">
    <span>Share:</span>
    <div class="share-icons">
      <a href="#" onclick="sharePost('whatsapp')"><i class="fab fa-whatsapp" style="color:#25D366;"></i></a>
      <a href="#" onclick="sharePost('twitter')"><i class="fab fa-twitter" style="color:#1DA1F2;"></i></a>
      <a href="#" onclick="sharePost('facebook')"><i class="fab fa-facebook" style="color:#1877F2;"></i></a>
      <a href="#" onclick="sharePost('copy')"><i class="fas fa-link" style="color:#555;"></i></a>
    </div>
  </div>
</section>

<!-- COUNTER SECTION -->
<section class="stats-section">
  <div class="stats-container">
    <div class="stat-box">
      <h2 class="counter" data-target="800">0</h2>
      <p>TOTAL USERS</p>
    </div>
    <div class="stat-box">
      <h2 class="counter" data-target="500">0</h2>
      <p>ACTIVE USERS</p>
    </div>
    <div class="stat-box">
      <h2 class="counter" data-target="500">0</h2>
      <p>ONLINE USERS</p>
    </div>
    <div class="stat-box">
      <h2 class="counter" data-target="2">0+</h2>
      <p>YEARS OF EXPERIENCE</p>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer style="background:var(--uni-green); color:#fff; padding:30px 16px; margin-top:0;">
  <div style="max-width:1100px; margin:0 auto; display:flex; flex-wrap:wrap; justify-content:space-between; gap:20px;">
    
    <!-- Left: About -->
    <div style="flex:1; min-width:220px;">
      <h3 style="margin-top:0;">EYES OF 3080</h3>
      <p style="margin:0;">Your trusted source for campus news, academic updates, and student life at Osun State University.</p>
    </div>
    
    <!-- Middle: Quick Links -->
    <div style="flex:1; min-width:180px;">
      <h3 style="margin-top:0;">Quick Links</h3>
      <ul style="list-style:none; padding:0; margin:0; line-height:1.8;">
        <li><a href="#" onclick="showSection('home')" style="color:#fff; text-decoration:none;">Home</a></li>
        <li><a href="#" onclick="showSection('campus-gist')" style="color:#fff; text-decoration:none;">Campus Gist</a></li>
        <li><a href="#" onclick="showSection('academic-updates')" style="color:#fff; text-decoration:none;">Academic Updates</a></li>
        <li><a href="#" onclick="showSection('gaming')" style="color:#fff; text-decoration:none;">Gaming Zone</a></li>
        <li><a href="#" onclick="showSection('contact')" style="color:#fff; text-decoration:none;">Contact</a></li>
        <li><a href="#" onclick="showSection('about-us')" style="color:#fff; text-decoration:none;">About Us</a></li>
      </ul>
    </div>
    
    <!-- Right: Contact -->
    <div style="flex:1; min-width:220px;">
      <h3 style="margin-top:0;">Contact</h3>
      <p>Email: <a href="mailto:eyesof3080@gmail.com" style="color:#fff;">eyesof3080@gmail.com</a></p>
      <p>WhatsApp: <a href="https://wa.me/2349043855915?text=Hello%20I%20want%20to%20promote%20my%20business%20on%20your%20website" target="_blank" style="color:#fff;">+2349043855915</a></p>
    </div>
  </div>
  
  <!-- About Us Section -->
  <div id="about-us" style="max-width:900px; margin:30px auto 0; text-align:center;">
    <h3>About Us</h3>
    <p style="line-height:1.6;">
      EYES OF 3080, We keep students connected, share real updates, and inspire one another to grow in UNIOSUN.
    </p>
  </div>

  <hr style="border-color:rgba(255,255,255,0.2); margin:20px 0;">
  
  <!-- Advertisement & Channel Info -->
  <p style="text-align:center; margin:5px 0; font-weight:bold;">
    Ads & Promotions: Contact us on WhatsApp 
    <a href="https://wa.me/2348162833687?text=Hello%20I%20want%20to%20advertise%20on%20EYES%20OF%203080" target="_blank" style="color:#fff; text-decoration:underline;">+2348162833687</a>
  </p>

  <p style="text-align:center; margin:5px 0; font-weight:bold;">
    Join Our WhatsApp Channel: 
    <a href="https://whatsapp.com/channel/0029Vb5GgTd7YSd37MohjE34" target="_blank" style="color:#fff; text-decoration:underline;">Click Here</a>
  </p>
</footer>

<!-- Counter Styles -->
<style>
  .stats-section {
    background: var(--uni-green);
    color: #fff;
    padding: 50px 20px;
    text-align: center;
  }
  .stats-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 1000px;
    margin: auto;
    gap: 30px;
  }
  .stat-box {
    flex: 1;
    min-width: 200px;
  }
  .stat-box h2 {
    font-size: 2.5rem;
    margin: 0;
    font-weight: bold;
  }
  .stat-box p {
    margin: 10px 0 0;
    font-size: 1.1rem;
  }
</style>

<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script>
/* ============================
   SUPABASE CONFIG
============================ */
const SUPABASE_URL = "https://vtpsruejncfykiazrfsx.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0cHNydWVqbmNmeWtpYXpyZnN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NDA5NzQsImV4cCI6MjA3MjMxNjk3NH0.UV55gbsSAgnyolxJhIYTaJUpvoJFsJn0_-LMNwhwAK0";
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

/* ============================
   COUNTER
============================ */
const counters = document.querySelectorAll('.counter');
const speed = 200;
counters.forEach(counter => {
  const animate = () => {
    const value = +counter.getAttribute('data-target');
    const current = +counter.innerText.replace('+','');
    const increment = Math.ceil(value / speed);
    if (current < value) {
      counter.innerText = current + increment;
      setTimeout(animate, 30);
    } else {
      counter.innerText = value + (counter.innerText.includes('+') ? '+' : '');
    }
  };
  animate();
});

/* ============================
   MENU + DARK MODE
============================ */
function toggleMenu(){ document.getElementById("menu").classList.toggle("active"); }
function toggleDarkMode(){ document.body.classList.toggle("dark"); }
document.querySelectorAll("#menu a").forEach(link=>{
  link.addEventListener("click", ()=>{ document.getElementById("menu").classList.remove("active"); });
});

/* ============================
   SECTION SWITCHING
============================ */
function showSection(id){
  document.querySelectorAll(".page-section").forEach(sec => sec.style.display="none");
  document.getElementById("postDetail").style.display="none";
  const section = document.getElementById(id);
  if(section) section.style.display="block";
  window.scrollTo(0,0);
}

/* ============================
   RENDER CARDS
============================ */
function renderCard(post, table){
  return `
    <article class="card">
      <div class="card-header">
        <h3>${post.title}</h3>
        <a href="#" class="share-icon" onclick="openShareMenu('${post.id}', '${table}')">
          <img src="https://cdn-icons-png.flaticon.com/512/3466/3466003.png" alt="Share" />
        </a>
      </div>
      <p>${post.excerpt || (post.content ? post.content.substring(0,100) : "")}...</p>
      <button class="btn" onclick="openPost('${post.id}', '${table}')">Read More</button>
    </article>
  `;
}

/* ============================
   LOAD POSTS INTO GRID
============================ */
async function loadAcademicUpdates() {
  const container = document.getElementById("academic-updates-list");
  if (!container) return;

  const { data, error } = await supabase
    .from("academic")
    .select("*")
    .order("id", { ascending: false });

  if (error) {
    console.error("‚ùå Error fetching academic updates:", error.message);
    return;
  }

  container.innerHTML = data.map(update => renderCard(update, "academic")).join("");
}

async function loadCampusGist() {
  const container = document.getElementById("campus-list");
  if (!container) return;

  const { data, error } = await supabase
    .from("campus")
    .select("*")
    .order("id", { ascending: false });

  if (error) {
    console.error("‚ùå Error fetching campus gist:", error.message);
    return;
  }

  container.innerHTML = data.map(gist => renderCard(gist, "campus")).join("");
}

async function loadHomeNews() {
  const container = document.getElementById("newsGrid");
  if (!container) return;

  const { data, error } = await supabase
    .from("home")
    .select("*")
    .order("id", { ascending: false });

  if (error) {
    console.error("‚ùå Error fetching home news:", error.message);
    return;
  }

  container.innerHTML = data.map(news => renderCard(news, "home")).join("");
}

async function loadPDFs() {
  const container = document.getElementById("pdf-list");
  if (!container) return;

  const { data, error } = await supabase
    .from("pdf")
    .select("*")
    .order("id", { ascending: false });

  if (error) {
    console.error("‚ùå Error fetching PDFs:", error.message);
    return;
  }

  container.innerHTML = data.map(pdf => `
    <div class="card">
      <h3>${pdf.title}</h3>
      <a href="${pdf.file_url}" target="_blank">üìÑ Download</a>
    </div>
  `).join("");
}

/* ============================
   PDF FILTER BY LEVEL
============================ */
document.getElementById("levelSelect").addEventListener("change", function() {
  const level = this.value;
  document.querySelectorAll(".pdf-grid").forEach(grid => grid.style.display = "none");
  if (level) {
    const grid = document.getElementById("pdfGrid" + level);
    if (grid) grid.style.display = "grid";
  }
});

/* ============================
   OPEN SINGLE POST
============================ */
async function openPost(id, table="home"){
  const safeId = isNaN(id) ? id : Number(id); // works for string or number IDs

  const { data: post, error } = await supabase
    .from(table)
    .select("*")
    .eq("id", safeId)
    .single();

  if (error || !post) {
    console.error("‚ùå Error fetching post:", error?.message, " | ID:", safeId, " Table:", table);
    return;
  }

  // hide sections, show detail
  document.querySelectorAll(".page-section").forEach(sec => sec.style.display="none");
  document.getElementById("postDetail").style.display="block";

  // Clear and rebuild title with share button
  const titleContainer = document.getElementById("detailTitle");
  titleContainer.innerHTML = `${post.title}`;

  // Add share button beside title
  const shareIcon = document.createElement("img");
  shareIcon.src = "https://cdn-icons-png.flaticon.com/512/3466/3466003.png";
  shareIcon.alt = "Share";
  shareIcon.style.width = "20px";
  shareIcon.style.cursor = "pointer";
  shareIcon.style.marginLeft = "10px";
  shareIcon.onclick = () => openShareMenu(post.id, table);
  titleContainer.appendChild(shareIcon);

  // Meta + image + content
  document.getElementById("detailMeta").innerText = 
    `Posted on ${new Date(post.created_at).toDateString()}`;

  if (post.image_url){
    document.getElementById("detailImage").src = post.image_url;
    document.getElementById("detailImage").style.display = "block";
  } else {
    document.getElementById("detailImage").style.display = "none";
  }

  document.getElementById("detailContent").innerHTML = post.content;

  history.pushState({postId:safeId, table}, post.title, `?id=${safeId}&t=${table}`);
}

/* ============================
   SHARE
============================ */
function openShareMenu(id, table){
  const url = `${window.location.origin}${window.location.pathname}?id=${id}&t=${table}`;
  const title = "Check this out!";

  if (navigator.share) {
    navigator.share({
      title: title,
      text: "Read this interesting post:",
      url: url
    }).catch(err => console.log("Share cancelled", err));
  } 
  else {
    const shareOptions = `
      Share this post:\n\n
      üîó WhatsApp: https://wa.me/?text=${encodeURIComponent(url)}\n
      üìò Facebook: https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}\n
      üê¶ Twitter: https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}\n
    `;
    navigator.clipboard.writeText(url);
    alert(shareOptions + "\n(Link copied to clipboard ‚úÖ)");
  }
}


/* ============================
   GAMERS CONNECTIONS
============================ */
async function addGamertag(event, game) {
  event.preventDefault();
  const input = document.getElementById(game + "Input");
  const list = document.getElementById(game + "List");
  if (!input || !list) return;

  const username = input.value.trim();
  if (!username) return;

  const { error } = await supabase.from("gamers").insert([
    { "Game": game, "Username": username }
  ]);

  if (error) {
    console.error("‚ùå Error saving gamertag:", error.message);
    alert("‚ùå Error saving gamertag: " + error.message);
    return;
  }

  renderGamertag(username, game, list);
  input.value = "";
}

function renderGamertag(username, game, list) {
  const li = document.createElement("li");
  const span = document.createElement("span");
  span.textContent = username;

  span.style.cursor = "pointer";
  span.style.background = "var(--uni-green)";
  span.style.color = "#fff";
  span.style.padding = "6px 12px";
  span.style.borderRadius = "6px";
  span.style.fontSize = "14px";
  span.style.transition = "background 0.3s ease";

  span.onmouseover = () => { span.style.background = "var(--uni-green-2)"; };
  span.onmouseout = () => { span.style.background = "var(--uni-green)"; };

  span.onclick = () => {
    const g = game.toLowerCase();

    if (g === "codm") {
      navigator.clipboard.writeText(username);
      alert(`${username}'s CODM ID has been copied! Attempting to open CODM...`);
      window.open(`codm://joinroom?code=ROOM_CODE_HERE`, "_blank");

    } else if (g === "bloodstrike") {
      navigator.clipboard.writeText(username);
      alert(`${username}'s Blood Strike ID has been copied! Open Blood Strike and paste to connect.`);

    } else {
      const connect = confirm(
        `Do you want to connect with ${username} on ${game.toUpperCase()}?\nClick OK to copy their ID.`
      );
      if (connect) {
        navigator.clipboard.writeText(username);
        alert(`${username}'s ID has been copied! Open ${game.toUpperCase()} to add them.`);
      }
    }
  };

  li.appendChild(span);
  list.appendChild(li);
}

function normalizeGameName(game) {
  return game.toLowerCase().replace(/\s/g, "");
}

async function loadGamertags() {
  const { data, error } = await supabase
    .from("gamers")
    .select("*")
    .order("id", { ascending: false });

  if (error) {
    console.error("‚ùå Error loading gamertags:", error.message);
    return;
  }

  data.forEach((gamer) => {
    const gameId = normalizeGameName(gamer.Game) + "List";
    const list = document.getElementById(gameId);
    if (list) {
      renderGamertag(gamer.Username, gamer.Game, list);
    }
  });
}

document.addEventListener("DOMContentLoaded", loadGamertags);

/* ============================
   BACK
============================ */
function goBack(){ showSection("home"); history.pushState({}, "News", window.location.pathname); }

// Copy UNIOSUN portal link
function copyPortalLink() {
  const portalLink = "https://admissions.uniosun.edu.ng/";
  navigator.clipboard.writeText(portalLink).then(() => {
    alert("UNIOSUN portal link copied to clipboard!");
  });
}

/* ============================
   ANONYMOUS MESSAGES
============================ */

let anonPage = 0;
const anonPageSize = 5;

async function submitAnonymousMessage(event) {
  event.preventDefault();
  const textInput = document.getElementById("anonText");
  const fileInput = document.getElementById("anonFile");
  const previewBox = document.getElementById("anonPreview");

  if (!textInput.value.trim()) {
    alert("‚ö†Ô∏è Please type a message.");
    return;
  }

  let fileUrl = null;
  if (fileInput.files.length > 0) {
    const file = fileInput.files[0];
    const fileName = Date.now() + "_" + file.name;
    const { data, error } = await supabase.storage
      .from("anon_uploads")
      .upload(fileName, file);

    if (error) {
      console.error("‚ùå File upload failed:", error.message);
    } else {
      const { data: publicUrlData } = supabase
        .storage
        .from("anon_uploads")
        .getPublicUrl(fileName);

      fileUrl = publicUrlData.publicUrl;
    }
  }

  const { error } = await supabase.from("anonymous_messages").insert([
    { message: textInput.value.trim(), file_url: fileUrl, created_at: new Date().toISOString() }
  ]);

  if (error) {
    console.error("‚ùå Error saving anonymous message:", error.message);
    alert("‚ùå Error saving message: " + error.message);
    return;
  }

  textInput.value = "";
  fileInput.value = "";
  previewBox.style.display = "none";
  previewBox.innerHTML = "";

  anonPage = 0;
  loadAnonymousMessages(true);
}

function previewAnonymousMessage() {
  const textInput = document.getElementById("anonText");
  const fileInput = document.getElementById("anonFile");
  const previewBox = document.getElementById("anonPreview");

  let html = "";
  if (textInput.value.trim()) {
    html += `<p>${textInput.value.trim()}</p>`;
  }

  if (fileInput.files.length > 0) {
    const file = fileInput.files[0];
    if (file.type.startsWith("image/")) {
      html += `<img src="${URL.createObjectURL(file)}" style="max-width:100%; margin-top:8px;">`;
    } else {
      html += `<p>üìé ${file.name}</p>`;
    }
  }

  previewBox.innerHTML = html || "<p style='color:#777;'>Nothing to preview</p>";
  previewBox.style.display = "block";
}

async function loadAnonymousMessages(reset = false) {
  const msgList = document.getElementById("anonMessages");
  const loadMoreBtn = document.getElementById("loadMoreBtn");

  if (reset) {
    msgList.innerHTML = "";
    anonPage = 0;
  }

  const from = anonPage * anonPageSize;
  const to = from + anonPageSize - 1;

  const { data, error } = await supabase
    .from("anonymous_messages")
    .select("*")
    .order("id", { ascending: false })
    .range(from, to);

  if (error) {
    console.error("‚ùå Error loading anonymous messages:", error.message);
    return;
  }

  if (!data || data.length === 0) {
    if (anonPage === 0) {
      msgList.innerHTML = "<p style='color:#666;'>No messages yet. Be the first to post! üí¨</p>";
    }
    loadMoreBtn.style.display = "none";
    return;
  }

  data.forEach(msg => {
    let html = `<div class="anon-card"><p>${msg.message}</p>`;
    if (msg.file_url) {
      if (msg.file_url.match(/\.(jpg|jpeg|png|gif)$/i)) {
        html += `<img src="${msg.file_url}" alt="Attachment" style="max-width:100%; margin-top:8px;">`;
      } else {
        html += `<a href="${msg.file_url}" target="_blank">üìé Download File</a>`;
      }
    }
    if (msg.created_at) {
      const date = new Date(msg.created_at);
      html += `<p style="font-size:12px; color:#666; margin-top:6px;">üïí ${date.toLocaleString()}</p>`;
    }
    html += `</div>`;
    msgList.innerHTML += html;
  });

  loadMoreBtn.style.display = (data.length === anonPageSize) ? "block" : "none";
}

function loadMoreAnonymousMessages() {
  anonPage++;
  loadAnonymousMessages();
}

document.addEventListener("DOMContentLoaded", () => {
  loadAnonymousMessages(true);
});

/* ============================
   SLIDER
============================ */
let currentSlide = 0;
function showSlide(index){
  const slides = document.querySelector(".slides");
  const total = document.querySelectorAll(".slide").length;
  if(!slides || total === 0) return;

  if(index < 0) index = total - 1;
  if(index >= total) index = 0;
  currentSlide = index;
  slides.style.transform = `translateX(-${index * 100}%)`;
}

function nextSlide(){ showSlide(currentSlide + 1); }
function prevSlide(){ showSlide(currentSlide - 1); }
setInterval(nextSlide, 5000);

/* ============================
   INIT
============================ */
window.onload = function(){
  const params = new URLSearchParams(window.location.search);
  if(params.has("id") && params.has("t")){
    openPost(params.get("id"), params.get("t"));
  } else {
    showSection("home");
    loadHomeNews();
    loadCampusGist();
    loadAcademicUpdates();
    loadPDFs();
  }
};

window.onpopstate = function(e){
  if(e.state && e.state.postId){ 
    openPost(e.state.postId, e.state.table); 
  } else { 
    goBack(); 
  }
};
</script>
</body>
</html>


